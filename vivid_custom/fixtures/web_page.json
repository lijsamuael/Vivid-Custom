[
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": "    /* Intro Section */\n    .intro {\n      background: linear-gradient(135deg, var(--primary), var(--secondary));\n      color: white;\n      text-align: center;\n      padding: 60px 0;\n      position: relative;\n      overflow: hidden;\n    }\n    \n    .intro::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: url('https://images.unsplash.com/photo-1556740738-b6a63e27c4df?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') center/cover;\n      opacity: 0.1;\n    }\n    \n    .intro h1 {\n      color: white;\n      font-size: 2.5rem;\n      margin-bottom: 15px;\n      position: relative;\n    }\n    \n    .intro p {\n      font-size: 1.2rem;\n      max-width: 700px;\n      margin: 0 auto;\n      position: relative;\n    }\n    \n* { margin: 0; padding: 0; box-sizing: border-box; }\nbody {\n  font-family: 'Segoe UI', Tahoma, sans-serif;\n  background-color: #eef7fc;\n  color: #333;\n  line-height: 1.6;\n}\na { color: #0277bd; text-decoration: none; }\n.container { max-width: 1150px; margin: auto; padding: 2rem; }\n\n/* Header */\n.top-header {\n  background: linear-gradient(to right, #0277bd, #80deea);\n  color: white;\n  padding: 3rem 0; text-align: center;\n}\n.top-header h1 { font-size: 2.7rem; margin-bottom: 0.5rem; }\n.top-header p { font-size: 1.1rem; }\n\n/* Intro */\n.intro {\n  background-color: #fff;\n  padding: 2rem 0; border-bottom: 1px solid #ddd;\n}\n.intro h2 { color: #0277bd; margin-bottom: 1rem; }\n\n/* Date Input */\n.date-input-container {\n  margin: 1rem 0;\n  display: flex;\n  align-items: center;\n}\n.date-input-container label { margin-right: 0.5rem; font-weight: 600; }\n.date-input-container input {\n  padding: 0.4rem; border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n/* Table */\n.responsive-table { overflow-x: auto; }\n.quotation-table {\n  width: 100%; border-collapse: collapse;\n  background-color: #fff;\n  box-shadow: 0 0 10px rgba(0,0,0,0.05);\n  border-radius: 6px; overflow: hidden;\n}\n.quotation-table th, .quotation-table td {\n  padding: 0.2rem 0.5rem; border-bottom: 1px solid #e0e0e0;\n  font-size: 0.95rem; vertical-align: middle;\n}\n.quotation-table th {\n  background-color: #e1f5fe;\n  font-weight: 600;\n}\n.product-image {\n  width: 100px; height: 100px; object-fit: contain;\n  border: 1px solid #ddd; border-radius: 4px;\n}\n.no-image {\n  width: 50px; height: 50px;\n  background: #f0f0f0; color: #999;\n  display: flex; align-items: center; justify-content: center;\n  font-size: 0.7rem; border-radius: 4px;\n}\n\n/* Button */\n.order-button-container {\n  margin: 1.5rem 0; text-align: right;\n}\n.order-button {\n  background-color: #0288d1;\n  color: white;\n  padding: 0.8rem 1.5rem;\n  font-size: 1rem; font-weight: 600;\n  border: none; border-radius: 5px;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n.order-button:hover {\n  background-color: #01579b;\n}\n\n/* Message */\n#order-message {\n  margin-top: 1rem;\n  font-size: 1rem;\n}\n\n\n\n\n.form-grid {\n  display: flex;\n  gap: 1.5rem;\n  margin: 1.5rem 0;\n  flex-wrap: wrap;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-width: 250px;\n}\n\n.form-group label {\n  font-weight: 600;\n  margin-bottom: 0.4rem;\n}\n\n.form-group input {\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n\n\n.auto-slider {\n  display: flex;\n  overflow: hidden;\n  position: relative;\n}\n.product-card {\n  flex: 0 0 calc(33.33% - 1rem);\n  text-align: center;\n  transition: transform 0.3s;\n}\n.product-card img {\n  height: 260px;\n  object-fit: contain;\n  width: 100%;\n  border-radius: 8px;\n}\n.product-card h4 {\n  font-size: 1rem;\n  /*color: #333;*/\n}\n\n/* Social Media Section */\n.social-section {\n  background: #2277bd;\n  color: white;\n  padding: 2rem 0;\n  text-align: center;\n}\n.social-icons {\n  display: flex;\n  justify-content: center;\n  gap: 2rem;\n  margin-top: 1rem;\n}\n.social-icons a {\n  color: white;\n  font-size: 1.1rem;\n  text-decoration: none;\n}\n.social-icons a i {\n  margin-right: 0.5rem;\n}\n\n/* Total Calculation */\n.totals {\n  text-align: right;\n  margin-top: 1rem;\n  font-size: 1.1rem;\n}\n\n/* Rest of your previous CSS styles remain the same */\n\n\n\n/* Navigation Bar */\n.navbar {\n  background-color: #1e3a8a;\n  padding: 1rem 0;\n  position: sticky;\n  top: 0;\n  z-index: 1000;\n}\n.navbar-brand h1 {\n  color: white;\n  font-size: 1.5rem;\n  margin: 0;\n}\n.nav-links {\n  list-style: none;\n  display: flex;\n  gap: 2rem;\n  margin: 0;\n}\n.nav-links a {\n  color: white;\n  text-decoration: none;\n  font-size: 1rem;\n  transition: color 0.3s ease;\n}\n.nav-links a:hover {\n  color: #3b82f6;\n}\n.nav-toggle {\n  display: none;\n  color: white;\n  font-size: 1.5rem;\n  cursor: pointer;\n}\n@media (max-width: 768px) {\n  .nav-links {\n    display: none;\n    flex-direction: column;\n    position: absolute;\n    top: 60px;\n    left: 0;\n    width: 100%;\n    background-color: #1e3a8a;\n    padding: 1rem;\n  }\n  .nav-links.active {\n    display: flex;\n  }\n  .nav-toggle {\n    display: block;\n  }\n}\n\n/* Hero Section */\n.hero {\n  text-align: center;\n  padding: 100px 0;\n  background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n  color: white;\n}\n.hero h1 {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n.hero p {\n  font-size: 1.5rem;\n  max-width: 800px;\n  margin: 0 auto 2rem;\n}\n.cta-button {\n  display: inline-block;\n  padding: 12px 24px;\n  background-color: #3b82f6;\n  color: white;\n  text-decoration: none;\n  border-radius: 5px;\n  font-size: 1.1rem;\n  transition: background-color 0.3s ease;\n}\n.cta-button:hover {\n  background-color: #1e3a8a;\n}\n\n/* Different Section */\n.different-section {\n  padding: 60px 0;\n  background-color: #f9fafb;\n}\n.different-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 20px;\n  margin-top: 20px;\n}\n.different-item {\n  text-align: center;\n  padding: 20px;\n  background-color: white;\n  border-radius: 10px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n.different-item i {\n  font-size: 2rem;\n  color: #1e3a8a;\n  margin-bottom: 10px;\n}\n.different-item h3 {\n  font-size: 1.2rem;\n  color: #1e3a8a;\n  margin-bottom: 10px;\n}\n.different-item p {\n  font-size: 0.9rem;\n  color: #666;\n}",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 1,
  "javascript": "frappe.ready(function () {\n  let items = [];\n  let slideIndex = 0;\n  const tbody = document.getElementById(\"item-rows\");\n  const slider = document.getElementById(\"slider-track\");\n  const btn = document.getElementById(\"make-order-btn\");\n  const msg = document.getElementById(\"order-message\");\n\n  const subtotalEl = document.getElementById(\"subtotal\");\n  const vatEl = document.getElementById(\"vat\");\n  const grandTotalEl = document.getElementById(\"grand-total\");\n\n  // Modal creation function\n  function createModal(link) {\n    const modal = document.createElement(\"div\");\n    modal.className = \"modal\";\n    modal.style.position = \"fixed\";\n    modal.style.top = \"0\";\n    modal.style.left = \"0\";\n    modal.style.width = \"100%\";\n    modal.style.height = \"100%\";\n    modal.style.backgroundColor = \"rgba(0, 0, 0, 0.5)\";\n    modal.style.display = \"flex\";\n    modal.style.justifyContent = \"center\";\n    modal.style.alignItems = \"center\";\n    modal.style.zIndex = \"1000\";\n\n    const modalContent = document.createElement(\"div\");\n    modalContent.style.backgroundColor = \"#fff\";\n    modalContent.style.borderRadius = \"10px\";\n    modalContent.style.width = \"80%\";\n    modalContent.style.maxWidth = \"800px\";\n    modalContent.style.height = \"80%\";\n    modalContent.style.position = \"relative\";\n    modalContent.style.overflow = \"hidden\";\n    modalContent.style.boxShadow = \"0 4px 8px rgba(0, 0, 0, 0.2)\";\n\n    const iframe = document.createElement(\"iframe\");\n    iframe.src = link;\n    iframe.style.width = \"100%\";\n    iframe.style.height = \"100%\";\n    iframe.style.border = \"none\";\n\n    const closeButton = document.createElement(\"button\");\n    closeButton.textContent = \"Close\";\n    closeButton.style.position = \"absolute\";\n    closeButton.style.top = \"10px\";\n    closeButton.style.right = \"10px\";\n    closeButton.style.padding = \"8px 16px\";\n    closeButton.style.backgroundColor = \"#1e3a8a\";\n    closeButton.style.color = \"white\";\n    closeButton.style.border = \"none\";\n    closeButton.style.borderRadius = \"5px\";\n    closeButton.style.cursor = \"pointer\";\n    closeButton.style.transition = \"background-color 0.3s ease\";\n    closeButton.onmouseover = () => (closeButton.style.backgroundColor = \"#3b82f6\");\n    closeButton.onmouseout = () => (closeButton.style.backgroundColor = \"#1e3a8a\");\n    closeButton.onclick = () => document.body.removeChild(modal);\n\n    modalContent.appendChild(iframe);\n    modalContent.appendChild(closeButton);\n    modal.appendChild(modalContent);\n    document.body.appendChild(modal);\n  }\n\n  fetch(\"/api/method/erpnext.api.get_items_and_prices\")\n    .then(res => res.json())\n    .then(res => {\n      items = res.message || [];\n      tbody.innerHTML = \"\";\n\n      if (!items.length) {\n        tbody.innerHTML = \"<tr><td colspan='7'>No items found.</td></tr>\";\n        return;\n      }\n\n      // Create product table\n      items.forEach((item, idx) => {\n        const row = document.createElement(\"tr\");\n        row.innerHTML = `\n          <td><input type=\"checkbox\" data-idx=\"${idx}\" class=\"item-checkbox\"></td>\n          <td>${idx + 1}</td>\n          <td>${item.image ? `<img src=\"${item.image}\" class=\"product-image\">` : \"No image\"}</td>\n          <td>${item.item_code}</td>\n          <td>${item.item_name}</td>\n          <td>${item.price.toLocaleString()}</td>\n          <td><input type=\"number\" class=\"qty-input\" data-idx=\"${idx}\" value=\"12\" min=\"12\" disabled style=\"width: 60px;\" /></td>\n        `;\n        tbody.appendChild(row);\n      });\n\n      // Create slider cards (duplicate for continuous sliding)\n      const sliderItems = items.filter((_, idx) => idx < 12);\n      const duplicatedItems = [...sliderItems, ...sliderItems]; // Duplicate for seamless loop\n      duplicatedItems.forEach((item, idx) => {\n        const card = document.createElement(\"div\");\n        card.className = \"slider-card\";\n        card.style.flex = \"0 0 33.33%\"; // Show 3 cards at a time\n        card.style.minWidth = \"0\"; // Prevent overflow\n        card.innerHTML = `\n          <img src=\"${item.image}\" style=\"width: 100%; height: 300px; object-fit: cover;\" />\n          <div class=\"slider-card-content\">\n            <h3 style=\"font-size: 1rem; align-text: center;\">${item.item_name}</h3>\n          </div>\n        `;\n\n        // Add click event for specific item codes to show modal\n        const redirectLinks = {\n          \"0001\": \"https://www.applac.com/applac/159.html\",\n          \"0002\": \"https://www.applac.com/applac_2_premium_follow_on_formula_800g/161.html\",\n          \"0003\": \"https://www.applac.com/applac_3_premium_growing_up_formula_800g/162.html\",\n          \"0004\": \"https://www.applac.com/applac_premature_infant_formula_300g/\",\n          \"0005\": \"https://www.applac.com/applac_lactose_free_infant_formula_300g/\"\n        };\n\n        if (redirectLinks[item.item_code]) {\n          card.style.cursor = \"pointer\";\n          card.addEventListener(\"click\", () => {\n            createModal(redirectLinks[item.item_code]);\n          });\n        }\n\n        slider.appendChild(card);\n      });\n\n      // Continuous slider logic\n      function slide() {\n        slideIndex++;\n        if (slideIndex >= sliderItems.length) {\n          slideIndex = 0; // Reset to start for continuous loop\n          slider.scrollTo({ left: 0, behavior: 'instant' }); // Instant reset to avoid visual jump\n          setTimeout(() => {\n            slider.scrollTo({\n              left: slideIndex * slider.children[0].offsetWidth,\n              behavior: 'smooth'\n            });\n          }, 50); // Small delay to ensure smooth transition\n        } else {\n          slider.scrollTo({\n            left: slideIndex * slider.children[0].offsetWidth,\n            behavior: 'smooth'\n          });\n        }\n      }\n\n      setInterval(slide, 1700); // Slide every 3 seconds\n    });\n\n  tbody.addEventListener(\"change\", (e) => {\n    if (e.target.classList.contains(\"item-checkbox\")) {\n      const idx = e.target.dataset.idx;\n      const qty = tbody.querySelector(`.qty-input[data-idx=\"${idx}\"]`);\n      qty.disabled = !e.target.checked;\n      calculateTotals();\n    }\n    if (e.target.classList.contains(\"qty-input\")) {\n      calculateTotals();\n    }\n  });\n\n  function calculateTotals() {\n    let subtotal = 0;\n\n    document.querySelectorAll(\".item-checkbox:checked\").forEach(cb => {\n      const idx = cb.dataset.idx;\n      const item = items[idx];\n      const qty = parseInt(document.querySelector(`.qty-input[data-idx=\"${idx}\"]`).value);\n      subtotal += qty * item.price;\n    });\n\n    const vat = subtotal * 0.15;\n    const total = subtotal + vat;\n\n    subtotalEl.textContent = subtotal.toLocaleString();\n    vatEl.textContent = vat.toLocaleString();\n    grandTotalEl.textContent = total.toLocaleString();\n  }\n\n  btn.addEventListener(\"click\", () => {\n    const date = document.getElementById(\"delivery-date\").value;\n    const name = document.getElementById(\"customer-name\").value.trim();\n    const phone = document.getElementById(\"phone-number\").value.trim();\n    const company = document.getElementById(\"company\").value.trim();\n    const checkedBoxes = tbody.querySelectorAll(\".item-checkbox:checked\");\n\n    msg.textContent = \"\";\n\n    if (!checkedBoxes.length) return msg.textContent = \"🛑 Please select at least one item.\";\n    if (!name) return msg.textContent = \"🛑 Please enter your full name.\";\n    if (!company) return msg.textContent = \"🛑 Please enter your company name.\";\n    if (!phone) return msg.textContent = \"🛑 Please enter your phone number.\";\n    if (!date) return msg.textContent = \"🛑 Please select a delivery date.\";\n\n    const items_data = Array.from(checkedBoxes).map(cb => {\n      const idx = cb.dataset.idx;\n      const qty = parseInt(document.querySelector(`.qty-input[data-idx=\"${idx}\"]`).value);\n      return { item_code: items[idx].item_code, qty };\n    });\n\n    fetch(\"/api/method/erpnext.api.create_sales_order\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        full_name: name,\n        phone: phone,\n        delivery_date: date,\n        company: company,\n        items: items_data\n      })\n    })\n      .then(res => res.json())\n      .then(res => {\n        if (res.message?.name || res.name) {\n          msg.innerHTML = `✅ Order <strong>${res.message?.name || res.name}</strong> placed! <a href=\"/app/sales-order/${res.message?.name || res.name}\" target=\"_blank\">View</a>`;\n        } else {\n          msg.textContent = \"❌ Error placing order.\";\n        }\n      });\n  });\n});",
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  <title>Getachew Tekle Wholesale</title>\n  <link rel=\"stylesheet\" href=\"/files/quotation.css\">\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n  <link href=\"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap\" rel=\"stylesheet\">\n</head>\n<body>\n\n  <!-- Hero Section -->\n  <section class=\"hero\" id=\"home\">\n    <div class=\"container\">\n      <h1 style=\"color: white;\">Welcome to Getachew Tekle Wholesale</h1>\n      <p>Your trusted partner for fast and affordable quality products across Ethiopia.</p>\n      <a href=\"#products\" class=\"cta-button\">Explore Products</a>\n    </div>\n  </section>\n\n  <!-- Slider Section -->\n  <section class=\"slider-wrapper\" id=\"products\">\n    <div class=\"container\">\n      <h2>Featured Products</h2>\n      <div class=\"auto-slider\" id=\"slider-track\">\n        <!-- Product cards injected via JS -->\n      </div>\n    </div>\n  </section>\n\n  <!-- What Makes Us Different Section -->\n  <section class=\"different-section\" id=\"about\">\n    <div class=\"container\">\n      <h2>What Makes Us Different</h2>\n      <div class=\"different-grid\">\n        <div class=\"different-item\">\n          <i class=\"fas fa-leaf\"></i>\n          <h3>Structured Fatty Acids</h3>\n          <p>Reduces constipation, vomiting, and diarrhea.</p>\n        </div>\n        <div class=\"different-item\">\n          <i class=\"fas fa-shield-alt\"></i>\n          <h3>Probiotics (Synbiotics)</h3>\n          <p>Supports gut health, digestion, and immunity.</p>\n        </div>\n        <div class=\"different-item\">\n          <i class=\"fas fa-brain\"></i>\n          <h3>Essential Fatty Acids</h3>\n          <p>DHA and AA for brain and organ development.</p>\n        </div>\n        <div class=\"different-item\">\n          <i class=\"fas fa-ban\"></i>\n          <h3>No Palm Oil</h3>\n          <p>Prevents constipation and improves fat absorption.</p>\n        </div>\n        <div class=\"different-item\">\n          <i class=\"fas fa-balance-scale\"></i>\n          <h3>Ideal Protein Ratio</h3>\n          <p>60:40 whey to casein for optimal growth.</p>\n        </div>\n        <div class=\"different-item\">\n          <i class=\"fas fa-bone\"></i>\n          <h3>Pure Lactose</h3>\n          <p>Enhances calcium absorption and maintains glucose levels.</p>\n        </div>\n        <div class=\"different-item\">\n          <i class=\"fas fa-pills\"></i>\n          <h3>Additional Nutrients</h3>\n          <p>Includes Taurine, Choline, Inositol, L-Carnitine, and Biotin.</p>\n        </div>\n        <div class=\"different-item\">\n          <i class=\"fas fa-baby\"></i>\n          <h3>Note</h3>\n          <p>Breast milk is the best for the first 0-6 months.</p>\n        </div>\n      </div>\n    </div>\n  </section>\n\n  <!-- Social Section -->\n  <section class=\"social-section\" id=\"contact\">\n    <div class=\"container\">\n      <h3>Follow Us</h3>\n      <div class=\"social-icons\">\n        <a href=\"https://m.facebook.com/profile.php?id=61556998852806\" target=\"_blank\"><i class=\"fab fa-facebook\"></i> Facebook</a>\n        <a href=\"https://t.me/+251989904148\" target=\"_blank\"><i class=\"fab fa-telegram\"></i> Telegram</a>\n        <a href=\"https://www.instagram.com/applacinfant\" target=\"_blank\"><i class=\"fab fa-instagram\"></i> Instagram</a>\n        <a href=\"https://www.tiktok.com/@applac88\" target=\"_blank\"><i class=\"fab fa-instagram\"></i> Tiktok</a>\n      </div>\n    </div>\n  </section>\n\n  <!-- Quotation Section -->\n  <section class=\"quotation-section\">\n    <div class=\"container\">\n      <h2>Place Your Order</h2>\n      <div class=\"form-grid\">\n        <div class=\"form-group\">\n          <label for=\"customer-name\">Full Name:</label>\n          <input type=\"text\" id=\"customer-name\" placeholder=\"Your full name\" required />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"company\">Company:</label>\n          <input type=\"text\" id=\"company\" placeholder=\"Your company name\" required />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"phone-number\">Phone Number:</label>\n          <input type=\"tel\" id=\"phone-number\" placeholder=\"+251912345678\" required />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"delivery-date\">Delivery Date:</label>\n          <input type=\"date\" id=\"delivery-date\" required />\n        </div>\n      </div>\n\n      <div class=\"responsive-table\">\n        <table class=\"quotation-table\">\n          <thead>\n            <tr>\n              <th>Select</th>\n              <th>#</th>\n              <th>Image</th>\n              <th>Item Code</th>\n              <th>Item Name</th>\n              <th>Price (ETB)</th>\n              <th>Qty</th>\n            </tr>\n          </thead>\n          <tbody id=\"item-rows\">\n            <tr><td colspan=\"7\">Loading items...</td></tr>\n          </tbody>\n        </table>\n      </div>\n\n      <div class=\"totals\">\n        <p><strong>Subtotal:</strong> ETB <span id=\"subtotal\">0</span></p>\n        <p><strong>VAT (15%):</strong> ETB <span id=\"vat\">0</span></p>\n        <p><strong>Grand Total:</strong> ETB <span id=\"grand-total\">0</span></p>\n      </div>\n\n      <div class=\"order-button-container\">\n        <button id=\"make-order-btn\" class=\"order-button\">🛒 Make Order</button>\n      </div>\n\n      <div id=\"order-message\"></div>\n    </div>\n  </section>\n\n  <script src=\"/files/quotation.js\"></script>\n</body>\n</html>",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2025-07-15 10:19:31.045146",
  "module": null,
  "name": "quotation",
  "page_blocks": [
   {
    "add_background_image": 0,
    "add_border_at_bottom": 0,
    "add_border_at_top": 0,
    "add_bottom_padding": 1,
    "add_container": 1,
    "add_shade": 0,
    "add_top_padding": 1,
    "background_image": null,
    "css_class": null,
    "hide_block": 0,
    "parent": "quotation",
    "parentfield": "page_blocks",
    "parenttype": "Web Page",
    "section_id": null,
    "web_template": null,
    "web_template_values": null
   }
  ],
  "published": 1,
  "route": "quotation",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": "2025-07-01 10:39:12",
  "text_align": "Left",
  "title": "quotation",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": "<style>\n  .gps-container {\n    max-width: 400px;\n    margin: 80px 25%;\n    padding: 20px;\n    text-align: center;\n    border: 1px solid #ddd;\n    border-radius: 12px;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n  }\n\n  #send-location {\n    padding: 10px 20px;\n    background-color: #007cf0;\n    color: white;\n    border: none;\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 16px;\n  }\n\n  #send-location:hover {\n    background-color: #005bb5;\n  }\n\n  #status {\n    margin-bottom: 20px;\n    font-size: 14px;\n    color: #444;\n  }\n</style>\n",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 1,
  "javascript": "document.getElementById(\"send-gps-btn\").addEventListener(\"click\", function () {\n  const statusEl = document.getElementById(\"gps-status\");\n\n  if (!navigator.geolocation) {\n    statusEl.textContent = \"❌ Geolocation is not supported by your browser.\";\n    return;\n  }\n\n  statusEl.textContent = \"📍 Getting your location...\";\n\n  navigator.geolocation.getCurrentPosition(\n    async (position) => {\n      const lat = position.coords.latitude;\n      const long = position.coords.longitude;\n\n      const now = new Date();\n      const timestamp = now.toISOString();\n      const dateOnly = now.toISOString().split(\"T\")[0]; // YYYY-MM-DD\n\n      const payload = {\n        employee: frappe.session.user,\n        latitude: lat,\n        longitude: long,\n        timestamp: timestamp,\n        date: dateOnly\n      };\n\n      try {\n        const res = await fetch(\"/api/resource/GPS Location Log\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-Frappe-CSRF-Token\": frappe.csrf_token\n          },\n          body: JSON.stringify({ data: payload })\n        });\n\n        if (res.ok) {\n          statusEl.textContent = \"✅ Location sent successfully!\";\n        } else {\n          const err = await res.json();\n          console.error(err);\n          statusEl.textContent = \"❌ Failed to send location.\";\n        }\n      } catch (err) {\n        console.error(err);\n        statusEl.textContent = \"❌ Error sending location.\";\n      }\n    },\n    (err) => {\n      statusEl.textContent = \"❌ Location error: \" + err.message;\n    }\n  );\n});\n",
  "main_section": null,
  "main_section_html": "<button id=\"send-gps-btn\">Send My Location</button>\n<p id=\"gps-status\" style=\"margin-top: 10px; font-size: 14px; color: #555;\"></p>\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2025-07-28 11:58:23.764325",
  "module": null,
  "name": "geo-location-tracker",
  "page_blocks": [],
  "published": 1,
  "route": "geo-location-tracker",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Geo Location Tracker",
  "website_sidebar": null
 }
]